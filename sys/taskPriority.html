<!-- <!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">
  <title>Task Priority Tracker</title>
  <link rel="stylesheet" href="https://cdn.datatables.net/1.10.25/css/jquery.dataTables.min.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <style>
    body {
      padding-bottom: 60px;
    }
    .footer {
      position: fixed;
      bottom: 0;
      width: 100%;
      height: 60px;
      background-color: #f5f5f5;
    }
  </style> -->
<!--   <style type="text/css">
td.status {
  background-color: #ffffff; /* default background color */
}

td.status-open {
  background-color: #00ff00; /* change background color for Open status */
}

td.status-in-progress {
  background-color: #ffff00; /* change background color for In Progress status */
}

td.status-closed {
  background-color: #ff0000; /* change background color for Closed status */
}
td.priority {
  font-weight: bold;
  text-align: center;
}

td.priority-low {
  background-color: #b3ffb3; /* light green */
}

td.priority-medium {
  background-color: #ffffb3; /* light yellow */
}

td.priority-high {
  background-color: #ff9999; /* light red */
}
  </style> -->
<!-- </head>
<body>
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <a class="navbar-brand" href="#">My Website</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav">
        <li class="nav-item active">
          <a class="nav-link" href="Home.html">Home</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">About</a>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            Function
          </a>
          <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
            <a class="dropdown-item" href="taskPriority.html">Priority Tracker</a>
            <a class="dropdown-item" href="Daily Expense Tracker.html">Daily Expense Tracker</a>
            <a class="dropdown-item" href="Task Tracker.html">Task Tracker</a>
            <a class="dropdown-item" href="Planner.html">Planner</a>
            <a class="dropdown-item" href="Stock Inventory.html">Stock Inventory</a>
          </div>
        </li>
      </ul>
    </div>
  </nav> -->
<div class="container">
    <h1>Task Priority Tracker</h1>
    <button class="btn btn-primary mb-3" id="addTaskBtn">Add Task</button>
    <table id="taskTable" class="table table-striped">
        <thead>
            <tr>
                <th>Task</th>
                <th>Priority</th>
                <th>Status</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>
</div>
<!-- Add Task Modal -->
<div class="modal fade" id="addTaskModal" tabindex="-1" aria-labelledby="addTaskModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="addTaskModalLabel">Add Task</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form>
                    <div class="mb-3">
                        <label for="taskName" class="form-label">Task Name</label>
                        <input type="text" class="form-control" id="taskName">
                    </div>
                    <div class="mb-3">
                        <label for="taskPriority" class="form-label">Task Priority</label>
                        <select class="form-select" id="taskPriority">
                            <option value="Low">Low</option>
                            <option value="Medium">Medium</option>
                            <option value="High">High</option>
                        </select>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary" id="saveTaskBtn">Save</button>
            </div>
        </div>
    </div>
</div>
<!-- Edit Task Modal -->
<div class="modal fade" id="editTaskModal" tabindex="-1" aria-labelledby="editTaskModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="editTaskModalLabel">Edit Task</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form>
                    <div class="mb-3">
                        <label for="editTaskName" class="form-label">Task Name</label>
                        <input type="text" class="form-control" id="editTaskName">
                    </div>
                    <div class="mb-3">
                        <label for="editTaskPriority" class="form-label">Priority</label>
                        <select class="form-select" id="editTaskPriority">
                            <option value="Low">Low</option>
                            <option value="Medium">Medium</option>
                            <option value="High">High</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="editTaskStatus" class="form-label">Status</label>
                        <select class="form-select" id="editTaskStatus">
                            <option value="Open">Open</option>
                            <option value="In-Progress">In-Progress</option>
                            <option value="Closed">Closed</option>
                        </select>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary" id="editTaskBtn">Save Changes</button>
            </div>
        </div>
    </div>
</div>
<!-- Footer -->
<!--   <footer class="footer fixed-bottom bg-light">
    <div class="container">
      <p class="text-muted">My Website &copy; 2023</p>
    </div>
  </footer>
 -->
<!--  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script> -->
<script>
$(document).ready(function() {
    // localStorage.clear();
    // Initialize DataTable
    $('#taskTable').DataTable({
        // "createdRow": function(row, data, dataIndex) {
        //   if (data[1] == 'High') {
        //     $(row).find('td:eq(1)').addClass('priority-high');
        //     $(row).find('td:eq(1)').addClass('status-open');
        //   } else if (data[1] == 'Medium') {
        //     $(row).find('td:eq(1)').addClass('priority-medium');
        //   } else if (data[1] == 'Low') {
        //     $(row).find('td:eq(1)').addClass('priority-low');
        //   }
        //   if (data[2] == 'Open') {
        //     $(row).find('td:eq(2)').addClass('status-open');
        //   } else if (data[2] == 'In-progress') {
        //     $(row).find('td:eq(2)').addClass('priority-in-progress');
        //   } else if (data[2] == 'Closed') {
        //     $(row).find('td:eq(2)').addClass('priority-closed');
        //   }
        // }
    });

    // Add Task button click event
    $('#addTaskBtn').on('click', function() {
        // Reset form inputs
        $('#addTaskModal input').val('');
        $('#addTaskModal select').val('1');
        // Show modal
        $('#addTaskModal').modal({
            backdrop: 'static',
            keyboard: false
        });
    });

    // Save Task button click event
    $('#saveTaskBtn').on('click', function() {
        // Get input values
        var taskName = $('#taskName').val();
        var taskPriority = $('#taskPriority').val();
        var taskStatus = 'Open'; // Default status
        console.log("taskPriority", taskPriority);
        // Add new row to DataTable
        $('#taskTable').DataTable().row.add([
            taskName,
            taskPriority,
            taskStatus,
            '<button type="button" class="btn btn-sm btn-warning edit-task-btn">Edit</button>' +
            '<button type="button" class="btn btn-sm btn-danger delete-task-btn">Delete</button>'
        ]).draw();
        // Hide modal
        $('#addTaskModal').modal('hide');
        // Save table to localStorage
        localStorage.setItem('taskTable', $('#taskTable').html());
    });

    // Edit Task button click event
    $('#taskTable').on('click', '.edit-task-btn', function() {
        // Get row data
        var rowData = $(this).closest('tr').find('td').toArray().map(function(cell) {
            return $(cell).text();
        });
        // Set input values
        $('#editTaskName').val(rowData[0]);
        $('#editTaskPriority').val(rowData[1]);
        $('#editTaskStatus').val(rowData[2]);
        // Show modal
        $('#editTaskModal').modal({
            backdrop: 'static',
            keyboard: false
        });
        // Save row data to be edited
        $('#editTaskBtn').data('row-data', rowData);
    });

    // Save Changes button click event
    $('#editTaskBtn').on('click', function() {
        // Get input values
        var taskName = $('#editTaskName').val();
        var taskPriority = $('#editTaskPriority').val();
        var taskStatus = $('#editTaskStatus').val();
        // Get row data to be edited
        var rowData = $(this).data('row-data');
        // Update DataTable row
        var rowIndex = $('#taskTable').DataTable().row($(this).closest('tr')).index();
        $('#taskTable').DataTable().row(rowIndex).data([
            taskName,
            taskPriority,
            taskStatus,
            '<button type="button" class="btn btn-sm btn-warning edit-task-btn">Edit</button>' +
            '<button type="button" class="btn btn-sm btn-danger delete-task-btn">Delete</button>'
        ]).draw();
        // Hide modal
        $('#editTaskModal').modal('hide');
        // Save table to localStorage
        localStorage.setItem('taskTable', $('#taskTable').html());
    });

    // Delete Task button click event
    $('#taskTable').on('click', '.delete-task-btn', function() {
        // console.log("delete clicked");
        // Delete DataTable row
        // console.log( $(this).closest('tr'));
        // $('#taskTable').DataTable().row($(this).closest('tr')).remove().draw();
        // $(this).closest('tr').remove();
        var table = $('#taskTable').DataTable();
        table
            .row($(this).parents('tr'))
            .remove()
            .draw();
        // Save table to localStorage
        localStorage.setItem('taskTable', $('#taskTable').html());
    });

    // Load saved task table from localStorage
    var savedTable = localStorage.getItem('taskTable');
    if (savedTable) {
        $('#taskTable').html(savedTable);
        $('#taskTable').DataTable();
    }

});
</script>
<!-- </body></html> -->